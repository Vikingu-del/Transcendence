input {
    beats {
        port => 5044
    }
}

filter {
    # if [container][name] == "elastic-elasticsearch-1" {
    #     if [stream] != "stderr" {
    #         drop { }
    #     }
    # }

    # Drop logs that do not have "stream" field set to "stderr"
    # if [stream] != "stderr" {
    #     drop { }
    # }

    #     # Example: Drop logs from a specific container
    # if [docker][container][name] == "unwanted_container" {
    #     drop { }
    # }

    # # Example: Drop logs that contain a specific message
    # if "unwanted_message" in [message] {
    #     drop { }
    # }

    # # Example: Keep only logs from specific containers
    # if [docker][container][name] not in ["frontend", "vault", "elasticsearch", "kibana", "logstash"] {
    #     drop { }
    # }

    # # Example: Keep only logs with a specific log level
    # if [log][level] not in ["info", "error", "warn"] {
    #     drop { }
    # }

    # # Add more filters as needed

}

output {
    elasticsearch {
        hosts => "${ELASTICSEARCH_HOST_PORT}"
        user => "${ELASTIC_USERNAME}"
        password => "${ELASTIC_PASSWORD}"
        ssl => true
        ssl_certificate_verification => false
        cacert => "/certs/ca.crt"
    }
}
